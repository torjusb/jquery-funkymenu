(function(a){a.fn.funkyMenu=function(){return this.each(function(){var d=a(this),b=d.children("li"),f=d.find("> li a"),i=b.find("li");d.after('<span id="bg-easer" />');var g=a("#bg-easer");g.css({width:parseInt(b.filter(":first").width()),left:parseInt(b.filter(":first").css("margin-left"))});i.hover(function(){a(this).children("span").fadeIn()},function(){a(this).children("span").fadeOut()});f.hover(function(){var c=a(this),h=c.siblings("ul:first"),e=b.filter(".tempActive");e=e.length;g.animate({width:parseInt(c.outerWidth()), left:parseInt(c.offset().left)-parseInt(d.offset().left)});c.addClass("current");c.parent().hasClass("tempActive")||(e>0?b.filter(".tempActive").children("ul").slideUp("fast",function(){h.slideDown("fast")}):h.slideDown("fast"));b.removeClass("tempActive")},function(){a(this).siblings("ul").length>0&&a(this).parent().addClass("tempActive");f.removeClass("current");b.filter(":not(.tempActive)").children("ul").hide()})})}})(jQuery);